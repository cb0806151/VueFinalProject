<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>The Film Foyer</title>
    <style>
        body {
            background: black;
        }

        .panels {
        }
        .sidebars {
            width: 5%;
            height: 70vh;
            
        }
        .sidebars:hover {
            color: white;
        }
        .sidebar-text {
            font-family:'Courier New', Courier, monospace;
            padding: 10px;
            font-weight: bold;
            font-size: 50px;
        }
        .panel-footer{
            width: 100%;
            height: 5vh;
            position: absolute;
            background-color: black;
            opacity: 0.5;
        }

        .text-block {
            position: absolute;
            font-size: 15px;
            width: 30%;
            bottom: 200px;
            z-index: 2;
            color: white;
            opacity: 0;
        }

        .buttons {
            z-index: 3;
            opacity: 0;
        }

        #movie_card_holder {
            height: 70vh;
        }
        
    </style>
</head>
<body>
    <div id="app">
        <div class="w-100">
            <h1 class="text-center w-100">Fairway Foyer Films</h1>
        </div>
        <div class="d-flex justify-content-center align-items-center">


            <div class="sidebars d-flex justify-content-center align-items-center" id="previous_button" v-on:click="previousSetOfMovies()"><h1 class="sidebar-text"><</h1></div>

            <div id="movie_card_holder" v-for="movie in currentMovies">
                <div v-on:mouseover="mouseoverMovieCard($event)" id="panel_a" class="panels d-flex align-items-end">
                    <p id="text_a" class="text-block p-2" v-bind:value="movie.overview" v-on:mouseover="mouseoverMovieCard($event)"></p>
                    <div class="position-absolute p-2 buttons" id="buttons_a">
                        <p class="d-inline-block btn btn-outline-light">Childrens Ticket: $5.99</p>
                        <p class="d-inline-block btn btn-outline-light">Adults Ticket: $8.99</p>
                    </div>
                    <img id="image_a" class="panel-image w-100" v-bind:src="'http://image.tmdb.org/t/p/w500' + movie.poster_path">        
                </div>
            </div>

            <div class="sidebars d-flex justify-content-center align-items-center" id="next_button" v-on:click="nextSetOfMovies()"><h1 class="sidebar-text">></h1></div>


        </div>        
    </div>
    <script>
        const app = new Vue({
                el: "#app",
                data: {
                    currentMovies: [],
                    currentMoviesOffset: 0
                },
                methods: {
                    mouseoverMovieCard(movieCardId) {
                        console.log(movieCardId.currentTarget.id)
                    },
                    previousSetOfMovies() {
                        if (this.currentMoviesOffset > 0) {
                            this.currentMoviesOffset -= 3
                            this.currentMovies = movies.responseJSON.results.slice(this.currentMoviesOffset, this.currentMoviesOffset+3);
                        }
                    },
                    nextSetOfMovies() {
                        if (this.currentMoviesOffset + 3 < movies.responseJSON.results.length) {
                            this.currentMoviesOffset += 3
                            this.currentMovies = movies.responseJSON.results.slice(this.currentMoviesOffset, this.currentMoviesOffset+3);
                        }
                        
                    }
                }
        });
        console.log(app._data.currentMovies)
        var movieCardIds = [
            ["panel_a", "panel_b", "panel_c"],
            ["image_a", "image_b", "image_c"],
            ["text_a", "text_b", "text_c"],
            ["buttons_a", "buttons_b", "buttons_c"]
        ]
        var request = "https://api.themoviedb.org/3/movie/76341?api_key=2adc1efea60bd3eefc285c12532c4ce8/discover/movie?primary_release_date.gte=2014-09-15&primary_release_date.lte=2014-10-22"
        request = "https://api.themoviedb.org/3/movie/now_playing?api_key=2adc1efea60bd3eefc285c12532c4ce8&language=en-US&page=1"
        var movies = $.get(request, function(response) {
            $("#image_a").attr("src","http://image.tmdb.org/t/p/w500/" + response.results[0].poster_path);
            $("#text_a").text(response.results[0].overview);
            $("#image_b").attr("src","http://image.tmdb.org/t/p/w500/" + response.results[1].poster_path);
            $("#text_b").text(response.results[1].overview);
            $("#image_c").attr("src","http://image.tmdb.org/t/p/w500/" + response.results[2].poster_path);
            $("#text_c").text(response.results[2].overview);
            app._data.currentMovies = response.results.slice(0,3);
            console.log(app._data.currentMovies)
        });


        $("#panel_a").mouseenter(function(){
            $("#image_a").animate({
                opacity: 0.25
            },1000);
            $("#text_a").animate({
                opacity: 1
            },1000);
            $("#buttons_a").animate({
                opacity: 1
            },1000);
        })
        $("#panel_a").mouseleave(function(){
            $("#image_a").animate({
                opacity: 1
            },1000);
            $("#text_a").animate({
                opacity: 0
            },1000);
            $("#buttons_a").animate({
                opacity: 0
            },1000);
        })

        $("#panel_b").mouseenter(function(){
            $("#image_b").animate({
                opacity: 0.25
            },1000);
            $("#text_b").animate({
                opacity: 1
            },1000);
            $("#buttons_b").animate({
                opacity: 1
            },1000);
        })
        $("#panel_b").mouseleave(function(){
            $("#image_b").animate({
                opacity: 1
            },1000);
            $("#text_b").animate({
                opacity: 0
            },1000);
            $("#buttons_b").animate({
                opacity: 0
            },1000);
        })

        $("#panel_c").mouseenter(function(){
            $("#image_c").animate({
                opacity: 0.25
            },1000);
            $("#text_c").animate({
                opacity: 1
            },1000);
            $("#buttons_c").animate({
                opacity: 1
            },1000);
        })
        $("#panel_c").mouseleave(function(){
            $("#image_c").animate({
                opacity: 1
            },1000);
            $("#text_c").animate({
                opacity: 0
            },1000);
            $("#buttons_c").animate({
                opacity: 0
            },1000);
        })

    </script>
</body>
</html>